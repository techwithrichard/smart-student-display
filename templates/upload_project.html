{% extends "base.html" %}

{% block title %}Upload Project{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <h1>Upload Project</h1>
        <form method="POST" action="{{ url_for('upload_project') }}" enctype="multipart/form-data">
            <div class="form-group">
                <label for="title">Project Title</label>
                <input type="text" id="title" name="title" required>
            </div>
            
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="4"></textarea>
            </div>
            
            <div class="form-group">
                <label for="classroom_id">Classroom</label>
                <select id="classroom_id" name="classroom_id" required>
                    <option value="">Select a classroom</option>
                    {% for classroom in classrooms %}
                        <option value="{{ classroom.id }}">{{ classroom.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="project_type">Project Type</label>
                <select id="project_type" name="project_type" required onchange="toggleProjectInput()">
                    <option value="">Select type</option>
                    <option value="html">HTML Page</option>
                    <option value="scratch">Scratch Link</option>
                </select>
            </div>
            
            <div class="form-group" id="html-input">
                <label for="file">Upload HTML File</label>
                <input type="file" id="file" name="file" accept=".html">
            </div>
            
            <div class="form-group" id="scratch-input" style="display: none;">
                <label for="scratch_link">Scratch Project Link</label>
                <input type="url" id="scratch_link" name="scratch_link" placeholder="https://scratch.mit.edu/projects/...">
            </div>
            
            <button type="submit" class="btn btn-primary btn-block">Upload Project</button>
        </form>
    </div>
</div>

<script>
function toggleProjectInput() {
    const projectType = document.getElementById('project_type').value;
    const htmlInput = document.getElementById('html-input');
    const scratchInput = document.getElementById('scratch-input');
    
    if (projectType === 'html') {
        htmlInput.style.display = 'block';
        scratchInput.style.display = 'none';
        document.getElementById('file').required = true;
        document.getElementById('scratch_link').required = false;
    } else if (projectType === 'scratch') {
        htmlInput.style.display = 'none';
        scratchInput.style.display = 'block';
        document.getElementById('file').required = false;
        document.getElementById('scratch_link').required = true;
    } else {
        htmlInput.style.display = 'none';
        scratchInput.style.display = 'none';
        document.getElementById('file').required = false;
        document.getElementById('scratch_link').required = false;
    }
}
</script>
{% endblock %}
