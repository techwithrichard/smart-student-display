{% extends "base.html" %}

{% block title %}Project Settings - {{ project.title }}{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <h1>Project Settings</h1>
        <form method="POST" action="{{ url_for('project_settings', project_id=project.id) }}" enctype="multipart/form-data">
            <div class="form-group">
                <label for="visibility">Visibility</label>
                <select id="visibility" name="visibility">
                    <option value="classroom" {% if project.visibility == 'classroom' %}selected{% endif %}>Classroom Only</option>
                    <option value="public" {% if project.visibility == 'public' %}selected{% endif %}>Public (Everyone)</option>
                    <option value="private" {% if project.visibility == 'private' %}selected{% endif %}>Private (Only Me)</option>
                    <option value="parents" {% if project.visibility == 'parents' %}selected{% endif %}>Parents (via teacher sharing)</option>
                </select>
                <small>Control who can view your project</small>
            </div>
            
            <div class="form-group">
                <label for="tagged_teacher_id">Tag Teacher</label>
                <select id="tagged_teacher_id" name="tagged_teacher_id">
                    <option value="">No teacher tagged</option>
                    {% for teacher in teachers %}
                        <option value="{{ teacher.id }}" {% if project.tagged_teacher_id == teacher.id %}selected{% endif %}>
                            {{ teacher.username }} ({{ teacher.email }})
                        </option>
                    {% endfor %}
                </select>
                <small>Tag a teacher to this project (required for parent sharing)</small>
            </div>
            
            <div class="form-group">
                <label for="screenshot">Project Screenshot</label>
                <input type="file" id="screenshot" name="screenshot" accept="image/*">
                {% if project.screenshot_path %}
                    <div class="current-screenshot">
                        <p>Current screenshot:</p>
                        <img src="{{ url_for('static', filename='screenshots/' + project.screenshot_path) }}" alt="Project screenshot" style="max-width: 300px; border-radius: 5px;">
                    </div>
                {% endif %}
                <small>Upload a screenshot of your project (shown when code cannot be displayed)</small>
            </div>
            
            <button type="submit" class="btn btn-primary btn-block">Save Settings</button>
            <a href="{{ url_for('view_project', project_id=project.id) }}" class="btn btn-secondary btn-block">Cancel</a>
        </form>
    </div>
</div>
{% endblock %}
